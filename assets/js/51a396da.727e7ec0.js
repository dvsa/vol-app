"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[264],{2996:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>d,default:()=>l,frontMatter:()=>s,metadata:()=>c,toc:()=>h});var i=n(7624),t=n(2172);const s={sidebar_position:10},d="Overview",c={id:"infrastructure/terraform/overview",title:"Overview",description:"VOL app infrastructure is deployed using Terraform. The Terraform code is located in",source:"@site/../docs/infrastructure/terraform/overview.md",sourceDirName:"infrastructure/terraform",slug:"/infrastructure/terraform/overview",permalink:"/infrastructure/terraform/overview",draft:!1,unlisted:!1,editUrl:"https://github.com/dvsa/vol-app/tree/main/docs/../docs/infrastructure/terraform/overview.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/infrastructure/docker/overview"},next:{title:"CI/CD",permalink:"/ci-cd"}},o={},h=[{value:"Accounts",id:"accounts",level:2},{value:"Environments",id:"environments",level:2}];function a(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",mermaid:"mermaid",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h1,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(r.p,{children:["VOL app infrastructure is deployed using Terraform. The Terraform code is located in\nthe ",(0,i.jsx)(r.a,{href:"https://github.com/dvsa/vol-app/tree/main/infra/terraform",children:"/infra/terraform"})," directory."]}),"\n",(0,i.jsxs)(r.p,{children:["The Terraform code is split into multiple modules, located\nin ",(0,i.jsx)(r.a,{href:"https://github.com/dvsa/vol-app/tree/main/infra/terraform/modules/",children:"/modules"})," directory. Each module will contain an\nauto-generated ",(0,i.jsx)(r.code,{children:"README.md"})," file which will provide more information about the module."]}),"\n",(0,i.jsx)(r.admonition,{type:"info",children:(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"README.md"})," files are automatically generated by ",(0,i.jsx)(r.a,{href:"https://github.com/terraform-docs/terraform-docs",children:"terraform-docs"}),"."]})}),"\n",(0,i.jsx)(r.p,{children:"The relationship between the Terraform directory structure is as per the diagram below:"}),"\n",(0,i.jsx)(r.mermaid,{value:'erDiagram\n    "AWS Account" ||--|| Account : "has"\n    Account ||--|{ Environment : "provides state & shared resources for"\n    Account {}\n    Account ||--|| "Account Module" : consumes\n    Environment {}\n    Environment ||--|| "Service Module" : consumes'}),"\n",(0,i.jsx)(r.h2,{id:"accounts",children:"Accounts"}),"\n",(0,i.jsx)(r.p,{children:"There are 2 AWS accounts:"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Alias"}),(0,i.jsx)(r.th,{children:"Account ID"}),(0,i.jsx)(r.th,{children:(0,i.jsx)("svg",{width:"13.5",height:"13.5","aria-hidden":"true",viewBox:"0 0 24 24",class:"iconExternalLink_nPIU",children:(0,i.jsx)("path",{fill:"currentColor",d:"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"})})})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"nonprod"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"054614622558"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"https://nonprod.signin.aws.amazon.com/console/",children:(0,i.jsx)("svg",{width:"13.5",height:"13.5","aria-hidden":"true",viewBox:"0 0 24 24",class:"iconExternalLink_nPIU",children:(0,i.jsx)("path",{fill:"currentColor",d:"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"})})})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"dvsa"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"146997448015"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"https://dvsa.signin.aws.amazon.com/console/",children:(0,i.jsx)("svg",{width:"13.5",height:"13.5","aria-hidden":"true",viewBox:"0 0 24 24",class:"iconExternalLink_nPIU",children:(0,i.jsx)("path",{fill:"currentColor",d:"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"})})})})]})]})]}),"\n",(0,i.jsxs)(r.admonition,{type:"warning",children:[(0,i.jsxs)(r.p,{children:["The accounts also contain resources that are managed in the ",(0,i.jsx)(r.a,{href:"https://github.com/dvsa/vol-terraform",children:"vol-terraform"})," repository."]}),(0,i.jsxs)(r.p,{children:["The infrastructure managed in this repository is defined in ",(0,i.jsx)(r.a,{href:"/rfc/rfc-005-add-terraform-to-mono-repository",children:"RFC-005"}),"."]})]}),"\n",(0,i.jsx)(r.h2,{id:"environments",children:"Environments"}),"\n",(0,i.jsx)(r.p,{children:"There are 2 fixed environments in each AWS account:"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Name"}),(0,i.jsx)(r.th,{children:"Description"}),(0,i.jsx)(r.th,{children:"Account"}),(0,i.jsx)(r.th,{children:"Region"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"dev"})}),(0,i.jsx)(r.td,{children:"Development"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"nonprod"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"eu-west-1"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"int"})}),(0,i.jsx)(r.td,{children:"Integration"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"nonprod"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"eu-west-1"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"prep"})}),(0,i.jsx)(r.td,{children:"Pre-production"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"dvsa"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"eu-west-1"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"prod"})}),(0,i.jsx)(r.td,{children:"Production"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"dvsa"})}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"eu-west-1"})})]})]})]})]})}function l(e={}){const{wrapper:r}={...(0,t.M)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);