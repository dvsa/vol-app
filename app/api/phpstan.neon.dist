# phpstan-doctrine-check.neon
includes:
    - vendor/phpstan/phpstan-doctrine/extension.neon

parameters:
    phpVersion: 80300
    level: 0
    paths:
        - module
        - public
        - config
    treatPhpDocTypesAsCertain: false

    ignoreErrors:
        # === Suppressed legacy getId() errors (VOL-6959) ===
        - message: "#Call to an undefined method Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\AbstractOperatingCentreOpposition::getId\\(\\)#"
          paths:
            - module/Api/src/Entity

        - message: "#Call to an undefined method Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\Letter\\\\AbstractLetterIssueTodo::getId\\(\\)#"
          paths:
            - module/Api/src/Entity

        - message: "#Call to an undefined method Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\Letter\\\\AbstractLetterTypeAppendix::getId\\(\\)#"
          paths:
            - module/Api/src/Entity

        - message: "#Call to an undefined method Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\Letter\\\\AbstractLetterTypeIssue::getId\\(\\)#"
          paths:
            - module/Api/src/Entity

        - message: "#Call to an undefined method Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\Letter\\\\AbstractLetterTypeSection::getId\\(\\)#"
          paths:
            - module/Api/src/Entity

        - message: "#Call to an undefined method Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\Letter\\\\LetterInstance::isDeleted\\(\\)#"
          paths:
            - module/Api/src/Entity

        # === Suppressed legacy undefined property errors (VOL-6959) ===
        - message: "#Access to an undefined property Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\Letter\\\\LetterIssueTodo::\\$letterTodoVersion#"
          paths:
            - module/Api/src/Entity

        - message: "#Access to an undefined property Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\Letter\\\\LetterTypeAppendix::\\$letterAppendixVersion#"
          paths:
            - module/Api/src/Entity

        - message: "#Access to an undefined property Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\Letter\\\\LetterTypeIssue::\\$letterIssueVersion#"
          paths:
            - module/Api/src/Entity

        - message: "#Access to an undefined property Dvsa\\\\Olcs\\\\Api\\\\Entity\\\\Letter\\\\LetterTypeSection::\\$letterSectionVersion#"
          paths:
            - module/Api/src/Entity

        # === Suppressed missing Laminas Mail classes (laminas-mail not required as a direct dependency) ===
        - message: '#(Class|Caught class|Instantiated class|has invalid type) Laminas\\Mail\\#'
          path: module/Email/src/Service/Imap.php

        # === Suppressed missing classes from optional/external packages ===
        - message: '#Class Dvsa\\Olcs\\Api\\Entity\\Letter\\LetterTypeTodo not found#'
        - message: '#Class Dvsa\\Olcs\\Email\\Transport\\S3File not found#'

        # === Suppressed missing return in CpmsV2HelperService::formatDate ===
        - message: '#Method Dvsa\\Olcs\\Api\\Service\\CpmsV2HelperService::formatDate\(\) should return string but return statement is missing#'
